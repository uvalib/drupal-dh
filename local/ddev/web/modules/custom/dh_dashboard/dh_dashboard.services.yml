services:
  plugin.manager.dh_requirement:
    class: Drupal\dh_dashboard\Plugin\DHRequirementPluginManager
    parent: default_plugin_manager

  dh_dashboard.manager:
    class: Drupal\dh_dashboard\Services\DashboardManager
    arguments: ['@current_user', '@plugin.manager.dh_requirement', '@entity_type.manager']

  dh_dashboard.cleanup:
    class: Drupal\dh_dashboard\Services\DashboardCleanupService
    arguments: ['@entity_type.manager', '@config.factory', '@logger.factory']

  dh_dashboard.commands:
    class: Drupal\dh_dashboard\Commands\DashboardCommands
    arguments: ['@dh_dashboard.cleanup']
    tags:
      - { name: drush.command }

  dh_dashboard.controller:
    class: Drupal\dh_dashboard\Controller\DashboardController
    arguments: 
      - '@dh_dashboard.manager'
      - '@plugin.manager.core.layout'
      - '@plugin.manager.block'
      - '@entity_display.repository'
      - '@uuid'

  dh_dashboard.certificate_service:
    class: Drupal\dh_dashboard\Services\CertificateService
    arguments:
      - '@current_user'
      - '@dh_certificate.manager'
