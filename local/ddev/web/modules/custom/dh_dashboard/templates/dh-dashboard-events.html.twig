{#
/**
 * @file
 * Default theme implementation for DH Events block.
 *
 * Available variables:
 * - items: Array of event items
 * - attributes: HTML attributes for the container
 * - show_debug: Boolean indicating debug mode
 * - pager_data: The pager data.
 */
#}
<div{{ attributes.addClass('dh-dashboard-block') }}>
  <div class="dh-card events-container">
    <h2>{{ 'Upcoming Events'|t }}</h2>

    {% if items.items is not empty %}
      <div class="events-grid">
        {% for item in items.items %}
          <article class="event-item dh-card {{ item.category_class }}">
            <div class="event-header">
              <h3 class="card-title">
                <i class="fas fa-calendar-alt"></i>
                <a href="{{ item.url }}" 
                   class="event-preview-trigger"
                   data-title="{{ item.title }}"
                   data-date="{{ item.date }}"
                   data-location="{{ item.location }}"
                   data-type="{{ item.type.label }}"
                   data-department="{{ item.department.label }}"
                   data-summary="{{ item.summary }}"
                   data-image="{{ item.image_url }}"
                   data-more-info="{{ item.more_info_url }}"
                   data-meeting="{{ item.meeting_url }}">
                  {{ item.title }}
                </a>
              </h3>
              <div class="card-meta">
                {% if item.date %}
                  <div class="meta-item date">
                    <i class="fas fa-clock"></i>
                    {{ item.date|date('F j, Y g:i a') }}
                  </div>
                {% endif %}
                {% if item.location %}
                  <div class="meta-item location">
                    <i class="fas fa-map-marker-alt"></i>
                    {{ item.location|raw }}
                  </div>
                {% endif %}
              </div>
            </div>
            <div class="card-content">
              {% if item.type.label %}
                <span class="event-type-badge {{ 'event-type--' ~ item.type.label|lower }}">
                  {{ item.type.label }}
                </span>
              {% endif %}
              {% if item.summary %}
                <p class="event-summary">{{ item.summary }}</p>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      </div>

      {% if pager_data %}
        {% include '@dh_dashboard/dh-dashboard-pager.html.twig' with {
          'pager_data': pager_data,
          'block_id': block_id
        } %}
      {% endif %}
    {% else %}
      <div class="empty-message">
        {{ 'No upcoming events found.'|t }}
      </div>
    {% endif %}
  </div>

  {% if show_debug %}
    <details class="debug-output">
      <summary>{{ 'Debug Information'|t }}</summary>
      <pre>{{ items|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
    </details>
  {% endif %}
</div>