{# filepath: /Users/ys2n/Code/ddev/drupal-dh/local/ddev/web/modules/custom/dh_dashboard/templates/dh-certificate-progress.html.twig #}
<div class="dh-certificate-progress">
  <h2>{% trans %}Certificate Progress{% endtrans %}</h2>
  
  {% if progress %}
    <div class="progress-summary">
      <div class="progress-bar">
        {{ progress.total_completed|default(0) }} of {{ progress.total_requirements|default(1) }} requirements completed
      </div>
      <div class="progress-text">
        {% set percentage = progress.total_requirements ? (progress.total_completed / progress.total_requirements * 100)|round : 0 %}
        {{ percentage }}% Complete
      </div>
    </div>

    <div class="certificate-progress__grid">
      <div class="main-card course-requirements">
        <h2>Course Requirements</h2>
        <div class="requirements-grid">
          {% for course in progress.courses %}
            <div class="requirement-card {{ course.completed ? 'completed' : '' }}">
              <div class="status-icon">{{ course.completed ? '✓' : '○' }}</div>
              <div class="card-content">
                <div class="course-number">{{ course.number }}</div>
                <div class="course-name">{{ course.name }}</div>
              </div>
              {% if course.semester %}
                <div class="semester">{{ course.semester }}</div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>

      <div class="main-card general-requirements">
        <h2>General Requirements</h2>
        <div class="requirements-grid">
          {% for requirement in progress.general %}
            <div class="requirement-card {{ requirement.completed ? 'completed' : '' }}">
              <div class="status-icon">{{ requirement.completed ? '✓' : '○' }}</div>
              <div class="card-content">
                <div class="requirement-name">{{ requirement.name }}</div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  {% else %}
    <p>No progress data available.</p>
  {% endif %}
</div>