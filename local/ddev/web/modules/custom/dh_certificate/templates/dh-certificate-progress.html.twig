{# filepath: /Users/ys2n/Code/ddev/drupal-dh/local/ddev/web/modules/custom/dh_certificate/templates/dh-certificate-progress.html.twig #}
<div class="certificate-progress">
  <h2>{{ title }}</h2>
  
  <div class="certificate-progress__summary">
    <div class="progress-bar">
      <div class="progress-bar__fill" style="width: {{ progress.percentage }}%">
        <span class="progress-bar__text">{{ progress.percentage }}%</span>
      </div>
    </div>
    
    <div class="progress-stats">
      <div class="stat">
        <span class="label">{{ 'Courses Completed'|t }}</span>
        <span class="value">{{ progress.completed_courses }}/{{ progress.total_courses }}</span>
      </div>
      <div class="stat">
        <span class="label">{{ 'Credits Earned'|t }}</span>
        <span class="value">{{ progress.total_credits }}/{{ progress.required_credits }}</span>
      </div>
    </div>
  </div>

  {% if progress.courses %}
    <div class="certificate-progress__courses">
      <h4>{{ 'Completed Courses'|t }}</h4>
      <ul>
        {% for course in progress.courses %}
          <li>{{ course.title }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  {% if is_admin %}
    <div class="admin-actions">
      <a href="{{ path('dh_certificate.admin') }}" class="button">{{ 'Settings'|t }}</a>
      <a href="{{ path('dh_certificate.courses') }}" class="button">{{ 'Manage Courses'|t }}</a>
      <a href="{{ path('dh_certificate.requirements') }}" class="button">{{ 'Requirements'|t }}</a>
    </div>

    <details class="certificate-progress__debug debug-tree">
      <summary>{{ 'Debug Information'|t }}</summary>
      {{ progress|json_tree }}
    </details>
  {% endif %}

  {% if is_admin and admin_url %}
    <div class="certificate-admin-link">
      <a href="{{ admin_url }}" class="button button--small button--primary">{{ 'Manage certificates'|t }}</a>
    </div>
  {% endif %}
</div>